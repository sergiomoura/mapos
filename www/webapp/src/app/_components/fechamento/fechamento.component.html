<div class="container-80 top-gap">
	<div class="controles">
		<mat-form-field class="container-fechamento">
			<mat-select
				(selectionChange) = "onFechamentoChange()"
				placeholder="Períodos de Fechamento"
				name="fechamentos"
				[(ngModel)]="fechamentoSelecionado" >
				<mat-option [value]="fechamento" *ngFor="let fechamento of fechamentos" >[{{fechamento.id}}] De {{fechamento.inicio|date:"dd/MM/yyyy"}} à {{fechamento.final|date:"dd/MM/yyyy"}}</mat-option>
			</mat-select>
		</mat-form-field>

		<button mat-mini-fab color="accent" (click)="onTransferirParaAntClick()" matTooltip="Transferir SSEs selecionadas para período de fechamento anterior.">
			<mat-icon>skip_previous</mat-icon>
		</button>

		<button mat-mini-fab color="accent" (click)="onTransferirParaProxClick()" matTooltip="Transferir SSEs selecionadas para próximo período de fechamento.">
			<mat-icon>skip_next</mat-icon>
		</button>

		<button [disabled]="!fechamentoSelecionado.aberto" mat-mini-fab color="accent" (click)="onFecharClick()" matTooltip="Encerrar período de fechamento.">
			<mat-icon>lock</mat-icon>
		</button>
	</div>

	<table>
		<thead>
			<tr>
				<td>
					<button mat-icon-button (click)="onMarcarTodasClick()" matTooltip="Marcar/Desmarcar todas">
						<mat-icon>done_all</mat-icon>
					</button>
				</td>
				<td>Número</td>
				<td>Medida Prev</td>
				<td>Medida Real</td>
				<td>TDS Prev</td>
				<td>TDS Real</td>
				<td>Valor Prev</td>
				<td>Valor Real</td>
				<td>Data Devolução</td>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let sse of fechamentoSelecionado?.sses">
				<td>
					<mat-checkbox color="primary" [(ngModel)]="sse.marcada" ></mat-checkbox>
				</td>
				<td>{{ sse.numero }}</td>
				<td>{{ sse.totalPrev.toString() }}</td>
				<td>{{ sse.totalReal.toString() }}</td>
				<td>RG{{ sse.tipoDeServicoPrev.codigo }}</td>
				<td>RG{{ sse.tipoDeServicoReal.codigo }}</td>
				<td>{{ sse.valor_prev | currency:'BRL':symbol:'1.2-2' | moedaBrasil}}</td>
				<td>{{ sse.valor_real | currency:'BRL':symbol:'1.2-2' | moedaBrasil}}</td>
				<td>{{ sse.data_devolucao | date:'dd/MM/yyyy' }}</td>
			</tr>
		</tbody>
	</table>
</div>